<launch>
    <!-- localization -->
	<!-- odom 和 camera_init 是等价的 (FAST_LIO 使用 camera_init 作为 odom frame) -->
	<node pkg="tf2_ros" type="static_transform_publisher" name="camera_init2odom"
      args="0 0 0 0 0 0 1 odom camera_init" />
	
	<!-- body -> imu_link (FAST_LIO 发布 camera_init -> body) -->
	<node pkg="tf2_ros" type="static_transform_publisher" name="body2imulink"
      args="0 0 0 0 0 0 1 body imu_link" />
	
	<!-- imu_link -> base_link -->
	<node pkg="tf2_ros" type="static_transform_publisher" name="imulink2baselink"
      args="0 0 0 0 0 0 1 imu_link base_link" />
	
	<!-- base_link -> motion_link -->
	<node pkg="tf2_ros" type="static_transform_publisher" name="baselink2motionlink"
      args="0 0 0 0 0 0 1 base_link motion_link" />

	<node pkg="open3d_loc" type="global_localization_node"  name="global_localization_node" output="screen">

		<rosparam command="load" file="$(find open3d_loc)/config/loc_param_g1.yaml" />
		<!-- 在此处更改地图地址 -->
		<param name="path_map" type="string" value="$(find open3d_loc)/../FAST_LIO/PCD/scans.pcd" />

		<param name="pcd_queue_maxsize" type="int" value="10" />
		<param name="voxelsize_coarse" type="double" value="0.15" />
		<param name="voxelsize_fine" type="double" value="0.1" />

		<!-- 定位配准阈值,超过这个值才更新odom2map -->
		<param name="threshold_fitness" type="double" value="0.5" />

		<!-- 初始化配准阈值,超过这个才能初始化成功 -->
		<param name="threshold_fitness_init" type="double" value="0.5" />
		<param name="loc_frequence" type="double" value="2.5" />
		<param name="save_scan" type="bool" value="0"/>
		<param name="hidden_removal" type="bool" value="0"/>
		<param name="maxpoints_source" type="int" value="80000" />
		<param name="maxpoints_target" type="int" value="400000" />
		
		<!-- for odom2map -->
		<param name="filter_odom2map" type="bool" value="0"/>
		<param name="kalman_processVar2" type="double" value="0.001" />
		<param name="kalman_estimatedMeasVar2" type="double" value="0.02" />

		<!-- localization confidence threshold-->
		<param name="confidence_loc_th" type="double" value="0.7" />
		
		<!-- distance th for update current submap(target, history) -->
		<param name="dis_updatemap" type="double" value="3.5" />
	</node>

	<param name="use_sim_time" value="false" />


</launch>
